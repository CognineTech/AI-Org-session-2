var eo=function(t){return 1-Math.pow(1-Math.max(0,Math.min(1,t)),3);};
var cl=function(v,a,b){return Math.max(a,Math.min(b,v));};
var lr=function(a,b,t){return a+(b-a)*t;};
function rr(c,x,y,w,h,r,f,s,sw){c.beginPath();c.moveTo(x+r,y);c.lineTo(x+w-r,y);c.quadraticCurveTo(x+w,y,x+w,y+r);c.lineTo(x+w,y+h-r);c.quadraticCurveTo(x+w,y+h,x+w-r,y+h);c.lineTo(x+r,y+h);c.quadraticCurveTo(x,y+h,x,y+h-r);c.lineTo(x,y+r);c.quadraticCurveTo(x,y,x+r,y);c.closePath();if(f){c.fillStyle=f;c.fill();}if(s){c.strokeStyle=s;c.lineWidth=sw||1;c.stroke();}}
function rrp(ctx,x,y,w,h,r){if(ctx.roundRect)ctx.roundRect(x,y,w,h,r);else ctx.rect(x,y,w,h);}
(function(){var cv=document.getElementById('bgc'),ctx=cv.getContext('2d');cv.width=1280;cv.height=720;var pts=[];for(var i=0;i<40;i++)pts.push({x:Math.random()*1280,y:Math.random()*720,vx:(Math.random()-.5)*.25,vy:(Math.random()-.5)*.25,r:Math.random()*1.2+.4});(function loop(){ctx.clearRect(0,0,1280,720);for(var i=0;i<pts.length;i++){var p=pts[i];p.x+=p.vx;p.y+=p.vy;if(p.x<0||p.x>1280)p.vx*=-1;if(p.y<0||p.y>720)p.vy*=-1;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle='rgba(71,85,105,.5)';ctx.fill();}for(var i=0;i<pts.length;i++){for(var j=i+1;j<pts.length;j++){var dx=pts[i].x-pts[j].x,dy=pts[i].y-pts[j].y,d=Math.sqrt(dx*dx+dy*dy);if(d<110){ctx.beginPath();ctx.strokeStyle='rgba(71,85,105,'+(1-d/110)*.25+')';ctx.lineWidth=.5;ctx.moveTo(pts[i].x,pts[i].y);ctx.lineTo(pts[j].x,pts[j].y);ctx.stroke();}}}requestAnimationFrame(loop);})();})();
function initArrow(id,col){var cv=document.getElementById(id);if(!cv)return;var ctx=cv.getContext('2d'),W=cv.width,H=cv.height;var pts=[];for(var i=0;i<5;i++)pts.push({t:i/5,s:.0045+Math.random()*.003});(function loop(){ctx.clearRect(0,0,W,H);for(var i=0;i<pts.length;i++){var p=pts[i];p.t+=p.s;if(p.t>1)p.t-=1;var y=20+p.t*130,a=p.t<.12?p.t/.12:p.t>.88?(1-p.t)/.12:1;ctx.beginPath();ctx.arc(W/2,y,2.5,0,Math.PI*2);ctx.fillStyle=col.replace('$',''+(a*.85));ctx.fill();}requestAnimationFrame(loop);})();}
setTimeout(function(){initArrow('ap1','rgba(245,158,11,$)');initArrow('ap2','rgba(168,85,247,$)');},900);
function initP1(el){var ctx=el.getContext('2d'),W=0,H=0,frame=0;var CY=300,RL=['"free money"?','links > 5?','unknown sender?'];function rsz(){W=el.offsetWidth;H=el.offsetHeight;el.width=W;el.height=H;}rsz();function drawMail(cx,cy,sz,a,col){ctx.save();ctx.globalAlpha=a;var w=sz*1.6,h=sz;rr(ctx,cx-w/2,cy-h/2,w,h,4,'rgba(30,41,59,.9)',col,1.5);ctx.beginPath();ctx.moveTo(cx-w/2,cy-h/2);ctx.lineTo(cx,cy+h*.28);ctx.lineTo(cx+w/2,cy-h/2);ctx.strokeStyle=col;ctx.lineWidth=1.5;ctx.stroke();ctx.restore();}(function loop(){ctx.clearRect(0,0,W,H);var n=(frame%CY)/CY,cx=W/2,eY=H*.1,rY=[H*.3,H*.52,H*.74],rW=W*.72,rH=H*.13;var eA=n<.07?eo(n/.07):n>.87?cl(1-(n-.87)/.1,0,1):1;drawMail(cx,eY+(n<.07?lr(-25,0,eo(n/.07)):0),18,eA,'#f59e0b');if(n>.07&&n<.87){ctx.save();ctx.globalAlpha=.2;ctx.strokeStyle='#334155';ctx.lineWidth=1;ctx.setLineDash([3,3]);ctx.beginPath();ctx.moveTo(cx,eY+11);ctx.lineTo(cx,rY[0]-rH/2);ctx.stroke();ctx.setLineDash([]);ctx.restore();}for(var i=0;i<3;i++){var rs=.12+i*.18,isA=n>=rs&&n<rs+.18,isD=n>=rs+.18&&n<.87;var rA=n<rs?0:n<rs+.04?eo((n-rs)/.04):n>.87?cl(1-(n-.87)/.1,0,1):1;if(rA<=0)continue;if(i>0){ctx.save();ctx.globalAlpha=rA*.2;ctx.strokeStyle='#334155';ctx.lineWidth=1;ctx.setLineDash([3,3]);ctx.beginPath();ctx.moveTo(cx,rY[i-1]+rH/2);ctx.lineTo(cx,rY[i]-rH/2);ctx.stroke();ctx.setLineDash([]);ctx.restore();}ctx.save();ctx.globalAlpha=rA;rr(ctx,cx-rW/2,rY[i]-rH/2,rW,rH,6,isA?'rgba(245,158,11,.12)':isD?'rgba(30,41,59,.6)':'rgba(15,23,42,.7)',isA?'#f59e0b':isD?'#334155':'#1e293b',isA?1.5:1);ctx.fillStyle=isA?'#fbbf24':'#64748b';ctx.font=(isA?'600 ':'400 ')+Math.round(W*.037)+'px Inter,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText(RL[i],cx,rY[i]);if(isD){var rx=cx+rW/2+16;ctx.beginPath();ctx.arc(rx,rY[i],10,0,Math.PI*2);ctx.fillStyle='rgba(34,197,94,.15)';ctx.fill();ctx.strokeStyle='#22c55e';ctx.lineWidth=1.5;ctx.stroke();ctx.fillStyle='#22c55e';ctx.font='bold '+Math.round(W*.042)+'px Inter';ctx.fillText('\u2713',rx,rY[i]+1);}ctx.restore();}if(n>.67&&n<.87){var bA=n<.71?eo((n-.67)/.04):n>.83?cl(1-(n-.83)/.04,0,1):1;ctx.save();ctx.globalAlpha=bA;var g=ctx.createRadialGradient(cx,H*.5,0,cx,H*.5,W*.4);g.addColorStop(0,'rgba(239,68,68,.12)');g.addColorStop(1,'rgba(239,68,68,0)');ctx.fillStyle=g;ctx.fillRect(0,0,W,H);rr(ctx,cx-W*.3,H*.42,W*.6,H*.16,8,'rgba(239,68,68,.15)','#ef4444',2);ctx.fillStyle='#fca5a5';ctx.font='bold '+Math.round(W*.054)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('BLOCKED',cx,H*.5);ctx.restore();}frame++;requestAnimationFrame(loop);})();el.closest('.pc').addEventListener('click',function(){frame=0;});}
function initP2(el){var ctx=el.getContext('2d'),W=0,H=0,frame=0,CY=400;function rsz(){W=el.offsetWidth;H=el.offsetHeight;el.width=W;el.height=H;}rsz();var em=[{t:'SPAM',c:'#ef4444'},{t:'SAFE',c:'#22c55e'},{t:'SPAM',c:'#ef4444'},{t:'SAFE',c:'#22c55e'},{t:'SPAM',c:'#ef4444'},{t:'SAFE',c:'#22c55e'}];function card(cx,cy,w,h,type,col,sc,al){ctx.save();ctx.globalAlpha=al;ctx.translate(cx,cy);ctx.scale(sc,sc);var g=ctx.createRadialGradient(0,0,0,0,0,w*.8);g.addColorStop(0,col+'33');g.addColorStop(1,col+'00');ctx.fillStyle=g;ctx.fillRect(-w,-h,w*2,h*2);ctx.fillStyle='rgba(10,18,35,.95)';ctx.strokeStyle=col;ctx.lineWidth=2;ctx.beginPath();rrp(ctx,-w/2,-h/2,w,h,8);ctx.fill();ctx.stroke();if(type==='SPAM'){ctx.strokeStyle=col;ctx.lineWidth=2.5;ctx.beginPath();ctx.moveTo(-w*.12,-h*.08);ctx.lineTo(w*.12,-h*.08);ctx.moveTo(0,-h*.08);ctx.lineTo(0,h*.08);ctx.stroke();ctx.beginPath();ctx.arc(0,h*.22,h*.06,0,Math.PI*2);ctx.fillStyle=col;ctx.fill();}else{ctx.strokeStyle=col;ctx.lineWidth=2.5;ctx.lineCap='round';ctx.beginPath();ctx.moveTo(-w*.18,0);ctx.lineTo(-w*.04,h*.15);ctx.lineTo(w*.2,-h*.15);ctx.stroke();}ctx.fillStyle=col;ctx.font='bold '+Math.round(h*.22)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='top';ctx.fillText(type,0,h*.32);ctx.restore();}(function loop(){ctx.clearRect(0,0,W,H);var n=(frame%CY)/CY,cx=W/2,cy=H/2,pulse=Math.sin(frame*.07)*.5+.5;if(n<0.42){var cW=W*.24,cH=H*.34,gx=(W-3*cW)/4,gy=(H-2*cH)/3,sN=Math.floor(eo(cl(n/0.36,0,1))*em.length);for(var i=0;i<sN;i++){var e=em[i],c2=i%3,row=Math.floor(i/3),ex=gx+c2*(cW+gx)+cW/2,ey=gy+row*(cH+gy)+cH/2,sc=i===sN-1&&n<0.36?eo(cl(n*em.length/0.36-i,0,1)):1;card(ex,ey,cW,cH,e.t,e.c,sc*.9+.1,sc);}if(n>.06){ctx.save();ctx.globalAlpha=cl((n-.06)/.05,0,1)*.65;ctx.fillStyle='#64748b';ctx.font=Math.round(H*.08)+'px Inter,sans-serif';ctx.textAlign='center';ctx.fillText('Show labeled examples to the model',cx,H*.93);ctx.restore();}}if(n>0.33&&n<0.68){var lA=n<0.36?eo((n-0.33)/0.03):n>0.65?cl(1-(n-0.65)/0.03,0,1):1,lP=cl((n-0.36)/0.29,0,1);ctx.save();ctx.globalAlpha=lA;ctx.fillStyle='#c084fc';ctx.font='bold '+Math.round(H*.1)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.fillText('Model is learning...',cx,H*.13);var br=H*.28,bg=ctx.createRadialGradient(cx,cy,0,cx,cy,br*(1.2+pulse*.15));bg.addColorStop(0,'rgba(168,85,247,'+(.18+pulse*.12)+')');bg.addColorStop(.5,'rgba(168,85,247,'+(.05+pulse*.04)+')');bg.addColorStop(1,'rgba(168,85,247,0)');ctx.fillStyle=bg;ctx.beginPath();ctx.arc(cx,cy,br*1.5,0,Math.PI*2);ctx.fill();ctx.fillStyle='rgba(8,14,28,.94)';ctx.strokeStyle='#a855f7';ctx.lineWidth=2.5;ctx.beginPath();ctx.arc(cx,cy,br,0,Math.PI*2);ctx.fill();ctx.stroke();var nc=Math.floor(lP*14);for(var i=0;i<nc;i++){var ang=i*(Math.PI*2/14)+frame*.025,dr=br*(.5+Math.sin(i*1.4)*.28),ds=2.5+Math.sin(frame*.09+i)*.8;ctx.beginPath();ctx.arc(cx+Math.cos(ang)*dr,cy+Math.sin(ang)*dr*.75,ds,0,Math.PI*2);ctx.fillStyle='rgba(192,132,252,'+(0.45+Math.sin(frame*.1+i)*.3)+')';ctx.fill();}ctx.fillStyle='#e9d5ff';ctx.font='bold '+Math.round(br*.52)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('ML',cx,cy-br*.1);ctx.fillStyle='#94a3b8';ctx.font=Math.round(br*.2)+'px Inter,sans-serif';ctx.fillText('learning',cx,cy+br*.3);var bpx=cx-W*.32,bpy=H*.83,bpw=W*.64,bph=H*.065;ctx.fillStyle='rgba(168,85,247,.1)';ctx.beginPath();rrp(ctx,bpx,bpy,bpw,bph,4);ctx.fill();var pg=ctx.createLinearGradient(bpx,0,bpx+bpw*lP,0);pg.addColorStop(0,'rgba(168,85,247,.85)');pg.addColorStop(1,'rgba(216,180,254,.95)');ctx.fillStyle=pg;ctx.beginPath();rrp(ctx,bpx,bpy,bpw*lP,bph,4);ctx.fill();ctx.strokeStyle='rgba(168,85,247,.35)';ctx.lineWidth=1;ctx.beginPath();rrp(ctx,bpx,bpy,bpw,bph,4);ctx.stroke();ctx.fillStyle='#c084fc';ctx.font='bold '+Math.round(H*.08)+'px Montserrat,sans-serif';ctx.textBaseline='top';ctx.fillText(Math.round(lP*100)+'% trained',cx,bpy+bph+5);ctx.restore();}if(n>0.61&&n<0.91){var cA=n<0.64?eo((n-0.61)/0.03):n>0.88?cl(1-(n-0.88)/0.03,0,1):1,cP=cl((n-0.64)/0.24,0,1);ctx.save();ctx.globalAlpha=cA;ctx.fillStyle='#94a3b8';ctx.font=Math.round(H*.09)+'px Inter,sans-serif';ctx.textAlign='center';ctx.textBaseline='top';ctx.fillText('New email arrives...',cx,H*.06);var eW=W*.3,eH=H*.42,eX=cx,eY=cy+H*.04;if(cP>0.08&&cP<0.52){var sY=eY-eH/2+(cP-0.08)/0.44*eH,sg=ctx.createLinearGradient(eX-eW/2,sY-10,eX-eW/2,sY+10);sg.addColorStop(0,'rgba(168,85,247,0)');sg.addColorStop(.5,'rgba(168,85,247,.7)');sg.addColorStop(1,'rgba(168,85,247,0)');ctx.save();ctx.globalAlpha=cA*.5;ctx.fillStyle=sg;ctx.fillRect(eX-eW/2,sY-10,eW,20);ctx.restore();}var rc=cP>0.5?'#ef4444':'#334155';ctx.fillStyle='rgba(8,14,28,.96)';ctx.strokeStyle=rc;ctx.lineWidth=cP>0.5?2.5:1.5;ctx.beginPath();rrp(ctx,eX-eW/2,eY-eH/2,eW,eH,10);ctx.fill();ctx.stroke();var ew2=eW*.55,eh2=eH*.28,ex2=eX,ey2=eY-eH*.1;ctx.strokeStyle=rc;ctx.lineWidth=1.5;ctx.beginPath();rrp(ctx,ex2-ew2/2,ey2-eh2/2,ew2,eh2,3);ctx.stroke();ctx.beginPath();ctx.moveTo(ex2-ew2/2,ey2-eh2/2);ctx.lineTo(ex2,ey2+eh2*.2);ctx.lineTo(ex2+ew2/2,ey2-eh2/2);ctx.stroke();if(cP<0.45){ctx.fillStyle='#475569';ctx.font='bold '+Math.round(eH*.2)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('Analyzing...',eX,eY+eH*.3);}else{var rA2=cl((cP-0.45)/0.2,0,1);ctx.globalAlpha=cA*rA2;var rg=ctx.createRadialGradient(eX,eY,0,eX,eY,W*.45);rg.addColorStop(0,'rgba(239,68,68,.2)');rg.addColorStop(1,'rgba(239,68,68,0)');ctx.fillStyle=rg;ctx.fillRect(0,0,W,H);ctx.fillStyle='#ef4444';ctx.font='bold '+Math.round(eH*.22)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('SPAM DETECTED!',eX,eY+eH*.3);}ctx.restore();}if(n>0.88){var fA=eo(cl((n-0.88)/0.07,0,1));ctx.save();ctx.globalAlpha=fA;var sg2=ctx.createRadialGradient(cx,cy,0,cx,cy,W*.5);sg2.addColorStop(0,'rgba(34,197,94,.2)');sg2.addColorStop(1,'rgba(34,197,94,0)');ctx.fillStyle=sg2;ctx.fillRect(0,0,W,H);ctx.fillStyle='#22c55e';ctx.font='bold '+Math.round(H*.14)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('\u2713 94% Accurate!',cx,cy);ctx.restore();}frame++;requestAnimationFrame(loop);})();el.closest('.pc').addEventListener('click',function(){frame=0;});}
function initP3(el){var ctx=el.getContext('2d'),W=0,H=0,frame=0;var PASS=110,layers=[4,5,5,4,2],lcols=['#60a5fa','#a78bfa','#818cf8','#6ee7b7','#2dd4bf'],llbls=['Input','Hidden 1','Hidden 2','Hidden 3','Output'];function rsz(){W=el.offsetWidth;H=el.offsetHeight;el.width=W;el.height=H;}rsz();function gN(){var nd=[];for(var l=0;l<layers.length;l++){var lx=W*(.1+l*.2);for(var n=0;n<layers[l];n++){nd.push({l:l,n:n,x:lx,y:H*(.5-(layers[l]-1)*.5*.15)+n*H*.15});}}return nd;}(function loop(){ctx.clearRect(0,0,W,H);var t=(frame%PASS)/PASS,nd=gN(),aL=Math.floor(t*(layers.length+1));for(var i=0;i<nd.length;i++){for(var j=0;j<nd.length;j++){if(nd[j].l!==nd[i].l+1)continue;ctx.save();ctx.globalAlpha=nd[i].l<aL?.18:.05;ctx.strokeStyle=nd[i].l<aL?lcols[nd[i].l]:'#1e293b';ctx.lineWidth=.8;ctx.beginPath();ctx.moveTo(nd[i].x,nd[i].y);ctx.lineTo(nd[j].x,nd[j].y);ctx.stroke();ctx.restore();}}if(aL>0&&aL<layers.length){var sT=(t*(layers.length+1))%1,fL=nd.filter(function(n){return n.l===aL-1;}),tL=nd.filter(function(n){return n.l===aL;});fL.forEach(function(fn){tL.forEach(function(tn){ctx.save();ctx.globalAlpha=.7;ctx.beginPath();ctx.arc(lr(fn.x,tn.x,sT),lr(fn.y,tn.y,sT),2.5,0,Math.PI*2);ctx.fillStyle=lcols[fn.l];ctx.fill();ctx.restore();});});}nd.forEach(function(n){var isA=n.l<aL,isC=n.l===aL;ctx.save();if(isA||isC){ctx.globalAlpha=isA?.15:.25;ctx.beginPath();ctx.arc(n.x,n.y,14,0,Math.PI*2);ctx.fillStyle=lcols[n.l];ctx.fill();}ctx.globalAlpha=isA?.9:isC?.7:.35;ctx.beginPath();ctx.arc(n.x,n.y,8,0,Math.PI*2);ctx.fillStyle=isA||isC?lcols[n.l]:'rgba(30,41,59,.8)';ctx.fill();ctx.strokeStyle=lcols[n.l];ctx.lineWidth=1.5;ctx.stroke();ctx.restore();});for(var l=0;l<layers.length;l++){var lx=W*(.1+l*.2),isA=l<aL;ctx.save();ctx.globalAlpha=isA?.8:.3;ctx.fillStyle=lcols[l];ctx.font=(isA?'600 ':'400 ')+Math.round(W*.026)+'px Inter,sans-serif';ctx.textAlign='center';ctx.textBaseline='top';ctx.fillText(llbls[l],lx,H*.88);ctx.restore();}if(aL>=layers.length){var oA=cl((t*(layers.length+1)-layers.length)/.5,0,1);ctx.save();ctx.globalAlpha=oA;rr(ctx,W*.76,H*.36,W*.2,H*.28,6,'rgba(20,184,166,.12)','#14b8a6',1.5);ctx.fillStyle='#2dd4bf';ctx.font='bold '+Math.round(W*.032)+'px Montserrat,sans-serif';ctx.textAlign='center';ctx.textBaseline='middle';ctx.fillText('Cat!',W*.86,H*.5);ctx.restore();}frame++;requestAnimationFrame(loop);})();el.closest('.pc').addEventListener('click',function(){frame=0;});}
(function(){var cards=[document.getElementById('c1'),document.getElementById('c2'),document.getElementById('c3')];var cur=0;function next(){cards.forEach(function(c){c.classList.remove('sp');});cards[cur].classList.add('sp');cur=(cur+1)%cards.length;}next();setInterval(next,4000);})();
window.addEventListener('load',function(){setTimeout(function(){initP1(document.getElementById('cv1'));initP2(document.getElementById('cv2'));initP3(document.getElementById('cv3'));},500);});
